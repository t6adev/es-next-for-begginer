# letとconst
ES5までは、変数宣言に`var`が使われてきました。  
ES2015から、`let`と`const`が仕様として用意されたのでこれらを使い、`var`を使わないことをおすすめします。

## 何故varはダメなのか
`var`の仕様上、コード実行時に開発者の意図せぬ結果を起こしやすい性質を持ちます。その理由に、`変数の巻き上げ(hoisting)`という性質があります。  
以下のコードが実行された場合、1番目と2番目の出力は、`1st a`, `2nd a`になります。
これは、グローバル変数として定義された`var a = '1st a';`が`show関数`で使われたことを意味します。  
```
var a = '1st a';
function show() {
  console.log(a); // 1番目の出力
  a = '2nd a';
  console.log(a); // 2番目の出力
}
show();
```

では、こちらのコードはどうなるでしょう。違いは`a = '2nd a';`に`var`が付いただけです。  
```
var a = '1st a';
function show() {
  console.log(a); // 1番目の出力
  var a = '2nd a';
  console.log(a); // 2番目の出力
}
show();
```

結果は、`undefined`, `2nd a`となります。  
これがhoistingと呼ばれるものになります。`var`での変数宣言はどこでおこなっても良いとされ、`show関数`内で`var a = '2nd a';`を書いたことで`console.log(a); // 1番目の出力`の`a`はグローバル変数ではなく`show関数`で宣言されたものになっています。  

ちなみに、グローバル変数としての`a`と区別されていることを確認したい場合、以下のコードは、順に`1st a`, `undefined`,  `2nd a`となります。  
```
var a = '1st a';
function show() {
  console.log(this.a);
  console.log(a);
  var a = '2nd a';
  console.log(a);
}
show();
```

上記のようにhoistingの性質はコードを書くうえで混乱を招きやすく、開発者にとってのメリットは無いと言ってよいと思います。もちろん、グローバル変数の使用を控え、関数内での変数宣言は冒頭で行うなどに気をつければ良いかもしれませんがシンプルに`var`を使わないことおすすめします。

## letとconstの違い
`let`や`const`は関数スコープではなく、ブロックスコープです。  
`let`は、値を書き換えたい場合に使います。  
`const`は、値を書き換えない、書き換えてほしくない、書き換えたくない場合に使います。  
```
let a = 'something';
a = 'anything'; // OK
const b = 'something';
b = 'anything'; // NG

const c = { prop: 'something' };
c.prop = 'anything'; // OK
```

`const`について注意していただきたいことは、オブジェクトのプロパティは変更可能ということです。変数自体が書き換わることが許可されないことに注意してください。

## 使い分け
結論から述べると、`let`は必要に迫られない限り使用せず`const`の使用をおすすめします。  
`let`で変数宣言されると、
- その変数が書き換わることを意味するため、変数の寿命が長くなると可読性が低くなる
- 宣言時の型をも書き換えることが可能なため、不本意に書き換えが起きた場合に発見が難しい
ということが挙げられます。  

`const`で宣言した変数を編集する場合、新たな変数に代入して宣言しましょう。編集された変数は新たな意味を持つ変数となるはずであり、それに見合った変数名で宣言することをおすすめします。
